<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Leiden Essay Film Festival">
    <meta name="keywords" content="leiden, film festival, leiden essay film festival, leiden film festival, leff">
    <meta name="description" content="14—16 September, Leiden. The first festival in the Netherlands dedicated entirely to the essay film.">

    <meta property="og:title" content="LEFF">
    <meta property="og:description" content="14—16 September, Leiden. The first festival in the Netherlands dedicated entirely to the essay film.">
    <meta property="og:image" content="/assets/header/og_1200x1200.png">
    <meta property="og:url" content="">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="/assets/header/og_1200x1200.png">

    
    <link rel="icon" href="/assets/header/favicon.ico" sizes="any">
    <link rel="icon" href="/assets/header/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/assets/header/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/header/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/assets/header/android-chrome-512x512.png">
    
    <meta name="theme-color" content="#C0BEBF">

    <title>LEFF</title>

    <!-- base href for github pages deployment -->
    
    
    <link rel="stylesheet" href="/styles.5ce9a77ac7.css">
    
    

    

<!-- d3.js for timeline visualization -->
<script src="https://d3js.org/d3.v7.min.js"></script>

<style>
    /* ultra wide container that breaks out of normal grid constraints */
    .schedule-ultra-wide {
        position: relative;
        width: 100vw;
        left: 50%;
        right: 50%;
        margin-left: -50vw;
        margin-right: -50vw;
        background: var(--silver);
        padding-block: var(--space-2xl);
        margin-top: var(--space-3xl);
        margin-bottom: var(--space-3xl);
    }

    .schedule-container {
        max-width: 1800px;
        margin: 0 auto;
        padding: 0;
    }

    .schedule-container h1 {
        font-size: 1rem;
        text-transform: uppercase;
        color: var(--text-main);
        margin-bottom: var(--space-2xl);
        font-weight: normal;
    }

    .schedule-tba {
        font-size: 1.25rem;
        color: var(--text-main);
        margin-bottom: var(--space-3xl);
        line-height: 1.4;
    }

    .day-tabs {
        padding-left: 60px;
        display: flex;
        gap: 0;
        /* margin-bottom: var(--space-3xl); */
        border-bottom: 2px solid var(--bg-main);
        font-family: 'switzer', sans-serif;
    }

    .day-tab {
        padding: var(--space-md) var(--space-lg);
        background: var(--silver);
        border: none;
        border-bottom: none;
        border-right: none;
        cursor: none;
        font-size: 1rem;
        font-weight: normal;
        transition: all 0.2s var(--transition);
        color: var(--text-main);
        text-transform: uppercase;
        font-family: inherit;
    }

    .day-tab:last-child {
        /* border-right: 2px solid var(--bg-main); */
    }

    .day-tab:hover {
        background: var(--bg-main);
        color: var(--accent);
    }

    .day-tab.active {
        background: var(--bg-main);
        color: var(--accent);
        border-bottom: 2px solid var(--bg-main);
        margin-bottom: -2px;
    }

    .timeline-container {
        margin: 0;
        padding: var(--space-lg);
        background: var(--silver);
        border: 2px solid var(--bg-main);
        /* border-bottom: 2px solid var(--bg-main); */
        overflow-x: auto;
        overflow-y: visible; /* changed from hidden to allow info panels to show */
        max-width: 100%;
    }

    .timeline-svg {
        background: var(--silver);
        font-family: 'switzer', sans-serif;
        min-width: 1800px;
        display: block;
    }

    .time-axis {
        font-size: 11px;
        font-family: 'switzer', sans-serif;
        font-weight: normal;
    }

    .time-axis text {
        text-anchor: middle;
        fill: var(--text-main);
    }

    .time-axis line {
        stroke: var(--text-main);
        stroke-width: 1px;
    }

    .time-axis path {
        stroke: var(--text-main);
        stroke-width: 1px;
    }

    .venue-label {
        font-size: 16px;
        font-weight: normal;
        fill: var(--text-main);
        font-family: 'switzer', sans-serif;
        text-transform: uppercase;
    }

    .venue-row {
        stroke: var(--bg-main);
        stroke-width: 2;
        fill: none;
    }

    .event-block {
        rx: 2;
        ry: 2;
        stroke: none;
        stroke-width: 0px;
        cursor: pointer;
        transition: all 0.2s var(--transition);
        /* opacity: 0.9; */
    }
    
    /* special styling for block events */
    .event-block.block-event {
        stroke: var(--text-main);
        stroke-width: 1px;
        stroke-dasharray: none;
        opacity: 0.95;
        cursor: pointer;
    }

    /* duration-based visual treatment */
    .event-block.short-duration {
        stroke-dasharray: 3,2;
    }

    .event-block.long-duration {
        stroke-width: 2px;
        stroke: var(--text-main);
        stroke-opacity: 0.4;
    }

    .event-text {
        font-size: 1.25rem;
        fill: var(--accent);
        font-weight: normal;
        text-anchor: start;
        pointer-events: none;
        font-family: 'switzer', Arial, sans-serif;
        text-transform: uppercase;
    }

    .event-director {
        font-size: 1.25rem;
        fill: var(--accent);
        text-anchor: start;
        pointer-events: none;
        font-family: 'switzer', Arial, sans-serif;
    }

    .event-time {
        font-size: 1rem;
        fill: var(--accent);
        text-anchor: start;
        pointer-events: none;
        font-family: 'switzer', sans-serif;
        font-weight: normal;
    }

    .schedule-film-arrow {
        /* arrow graphic removed */
    }

    .event-film-link {
        cursor: pointer;
        transition: all 0.2s var(--transition);
        background: var(--text-main);
        color: var(--accent);
        padding: var(--space-xs) var(--space-sm);
        margin-bottom: var(--space-xs);
        display: inline-block;
        border-radius: 0;
    }

    .event-film-link:hover {
        background: var(--accent);
        color: var(--text-main);
    }

    /* responsive adjustments */
    @media (max-width: 768px) {
        .schedule-ultra-wide {
            padding: var(--space-2xl) var(--space-sm);
        }

        .day-tabs {
            padding-left: 10px;
            flex-wrap: wrap;
            gap: 0;
        }
        
        .day-tab {
            padding: var(--space-sm) var(--space-md);
            font-size: 0.9rem;
            flex: 1;
            min-width: 0;
            text-align: center;
        }

        .day-tab:not(:last-child) {
            border-right: 2px solid var(--bg-main);
        }
        
        .timeline-container {
            padding: var(--space-md);
            -webkit-overflow-scrolling: touch;
        }

        .timeline-svg {
            min-width: 2000px; /* ensure minimum width maintains time accuracy */
        }

        .venue-label {
            font-size: 1rem;
        }

        .event-text {
            font-size: 1rem;
        }

        .event-director {
            font-size: 1rem;
        }

        .event-time {
            font-size: 0.875rem;
        }

        .event-info {
            /* max-width: 250px; */
            padding: var(--space-xs);
        }
    }

    /* ultra wide monitors */
    @media (min-width: 2560px) {
        .schedule-container {
            max-width: 2400px;
        }
    }
</style>



    
</head>

<body>
    <nav>
        
        <a href="/en/"><img src="/assets/leff-logo-yellow.svg"
                alt="leiden essay film festival logo" id="nav-logo"></a>
        
        <div id="circle-container">
            <a href="https://bioscopenleiden.nl/kijkhuis/special/leff/" target="_blank" rel="noopener" id="nav-tickets" class="tickets-button">
                Tickets
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon">
                    <path d="M5 12h14M13 5l7 7-7 7" fill="none" stroke="currentColor" stroke-width="2" />
                </svg>
            </a>
            <div id="languages">
                
                
                <button type="button" class="active">EN</button>
                
                
                
                
                <a href="/nl/schedule/">
                    <button type="button">NL</button>
                </a>
                
                
            </div>
            <div id="circle"></div>
            <div class="menu-close" style="display: none;">
                <button type="button" class="close-icon" id="menu-close" aria-label="close">
                    <svg width="1.5rem" height="1.5rem" viewBox="0 0 24 24">
                        <line x1="4" y1="4" x2="20" y2="20" stroke="currentColor" stroke-width="2" />
                        <line x1="20" y1="4" x2="4" y2="20" stroke="currentColor" stroke-width="2" />
                    </svg>
                </button>
            </div>
        </div>

        <div id="menu-overlay" class="menu-overlay">
            <div class="menu-grid grid-base">
                <div class="menu-nav">
                    <ul>
                        
                        <li>
                            
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon east-arrow">
                                <path d="M5 12h14M13 5l7 7-7 7" fill="none" stroke="currentColor" stroke-width="2" />
                            </svg>
                            <a href="/en/">Home</a>
                            
                        </li>
                        
                        <li>
                            
                            <div class="menu-dropdown-item">
                                <button type="button" class="menu-dropdown-toggle" data-dropdown="programme">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        class="arrow-icon east-arrow dropdown-arrow">
                                        <path d="M5 12h14M13 5l7 7-7 7" fill="none" stroke="currentColor"
                                            stroke-width="2" />
                                    </svg>
                                    <div class="drp-dwn-item-txt">Programme 2025</div>
                                </button>
                                <ul class="menu-dropdown-content" id="programme-dropdown">
                                    
                                    <li>
                                        <a href="/en/programme/films">A—Z films</a>
                                    </li>
                                    
                                    <li>
                                        <a href="/en/programme/filmmakers">A—Z filmmakers</a>
                                    </li>
                                    
                                    <li>
                                        <a href="/en/programme/specials">Specials</a>
                                    </li>
                                    
                                </ul>
                            </div>
                            
                        </li>
                        
                        <li>
                            
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon east-arrow">
                                <path d="M5 12h14M13 5l7 7-7 7" fill="none" stroke="currentColor" stroke-width="2" />
                            </svg>
                            <a href="/en/schedule/">Block Schedule</a>
                            
                        </li>
                        
                        <li>
                            
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon east-arrow">
                                <path d="M5 12h14M13 5l7 7-7 7" fill="none" stroke="currentColor" stroke-width="2" />
                            </svg>
                            <a href="/en/location/">Locations</a>
                            
                        </li>
                        
                        <li>
                            
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="arrow-icon east-arrow">
                                <path d="M5 12h14M13 5l7 7-7 7" fill="none" stroke="currentColor" stroke-width="2" />
                            </svg>
                            <a href="/en/tickets/">Tickets</a>
                            
                        </li>
                        
                        <li>
                            
                            <div class="menu-dropdown-item">
                                <button type="button" class="menu-dropdown-toggle" data-dropdown="about">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                                        class="arrow-icon east-arrow dropdown-arrow">
                                        <path d="M5 12h14M13 5l7 7-7 7" fill="none" stroke="currentColor"
                                            stroke-width="2" />
                                    </svg>
                                    <div class="drp-dwn-item-txt">About leff</div>
                                </button>
                                <ul class="menu-dropdown-content" id="about-dropdown">
                                    
                                    <li>
                                        <a href="/en/about/">Festival</a>
                                    </li>
                                    
                                    <li>
                                        <a href="/en/organisation/">Organisation</a>
                                    </li>
                                    
                                </ul>
                            </div>
                            
                        </li>
                        
                    </ul>
                </div>

            </div>
        </div>
    </nav>

    

    <section class="page-contents">
        
<div id="schedule-page" class="grid-base">
    


<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Block Schedule"}]}
</script>


<div class="breadcrumb-container" role="navigation" aria-label="breadcrumb">
    <ol class="breadcrumb-list">
        
            <li class="breadcrumb-item">
                
                    <h1 class="breadcrumb-current-page" aria-current="page">Block Schedule</h1>
                
            </li>
        
    </ol>
</div>

    
    

    <div id="general-info">
        <p class="about-main">
            On this page, you can check out the festival’s daily schedule: see what is playing when and click a title for more information on a film or film block.
        </p>
    </div>
</div>

<!-- ultra wide schedule section that breaks out of grid -->
<div class="schedule-ultra-wide">
    <div class="schedule-container">
        <!-- day tabs -->
        <div class="day-tabs" id="day-tabs"></div>
        
        <!-- timeline visualization container -->
        <div class="timeline-container">
            <svg class="timeline-svg" id="timeline-svg"></svg>
        </div>
    </div>
</div>

    </section>

    <footer>
        <div class="footer-container grid-base">
            <!-- email newsletter signup -->
            <div class="footer-newsletter-section">
                <h3 style="text-transform: uppercase;">Stay Updated</h3>
                <p>Subscribe to hear more from Leiden Essay Film Festival</p>
                <div id="mc_embed_signup">
                    <form
                        action="https://kabk.us8.list-manage.com/subscribe/post?u=fe6f0920a56a052079924e663&amp;id=0bef5e214f&amp;f_id=00bac6e2f0"
                        method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate"
                        target="_blank">
                        <div id="mc_embed_signup_scroll">
                            <div class="mc-field-group input-group footer-checkbox">
                                <input type="radio" name="MMERGE5" id="mce-MMERGE50" required
                                    value="I agree to the processing of my data as described in the privacy policy and to receive the leff newsletter and updates.">
                                <label for="mce-MMERGE50">
                                    I agree to the processing of my data as described in the
                                    <a href="/en/privacy/">Privacy Policy</a> and to receive the leff newsletter and updates.
                                </label>
                            </div>
                            <div class="mc-field-group">
                                <label for="mce-EMAIL" class="sr-only">Subscribe to hear more from Leiden Essay Film Festival</label>
                                <input type="email" name="EMAIL" class="required email" id="mce-EMAIL" required=""
                                    placeholder="Enter your email here" value="">
                                <input type="submit" name="subscribe" id="mc-embedded-subscribe" class="button"
                                    value="Subscribe">
                            </div>
                            <div id="custom-mce-responses"></div>
                            <div id="mce-responses" class="clear" style="display: none;">
                                <div class="response" id="mce-error-response" style="display: none;"></div>
                                <div class="response" id="mce-success-response" style="display: none;"></div>
                            </div>
                            <div aria-hidden="true" style="position: absolute; left: -5000px;">
                                <input type="text" name="b_fe6f0920a56a052079924e663_0bef5e214f" tabindex="-1" value="">
                            </div>
                        </div>
                    </form>
                </div>
            </div>

            <div class="footer-nav">
                <h4>Navigation</h4>
                <ul>
                    
                    
                    <li><a href="/en/">Home</a></li>
                    
                    <li><a href="/en/programme/">Programme 2025</a></li>
                    
                    <li><a href="/en/schedule/">Block Schedule</a></li>
                    
                    <li><a href="/en/location/">Locations</a></li>
                    
                    <li><a href="/en/tickets/">Tickets</a></li>
                    
                    
                        
                        
                        
                            
                            <li><a href="/en/programme/films">A—Z films</a></li>
                            
                            <li><a href="/en/programme/filmmakers">A—Z filmmakers</a></li>
                            
                            <li><a href="/en/programme/specials">Specials</a></li>
                            
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                </ul>
            </div>

            <div class="footer-info">
                    <h4>About leff</h4>
                    <ul>
                        <li><a href="/en/about/">Festival</a></li>
                        <li><a href="/en/organisation/">Organisation</a></li>
                    </ul>
            </div>

            <div class="footer-outside-links">
                <h4>Contact</h4>
                <ul>
                    <li><a href="mailto:leff@hum.leidenuniv.nl">leff@hum.leidenuniv.nl</a></li>
                    <li><a href="https://www.instagram.com/leidenessayfilmfestival" target="_blank" rel="noopener">Instagram</a></li>
                    <li><a href="/en/privacy/">Privacy Policy</a></li>
                </ul>
            </div>

            <!-- empty space for layout -->
            <div class="footer-spacer"></div>
        </div>

        <!-- credits -->
        <div class="footer-bottom grid-base">
            <p>This website was designed by <a href="https://www.instagram.com/michela.meliddo" target="_blank"
                    rel="noopener">Michela Meliddo</a>, Ellen Owens and coded by <a href="https://wshbd.com"
                    target="_blank" rel="noopener">Pyotr Goloub</a></p>
        </div>
    </footer>

    
<script>
    // schedule data from generator
    const scheduleData = {"14 September": {"14:00": {"Lakenhal": {"block": "Opening Event", "director": "Maria Iorio and Rapha\u00ebl Cuomo", "duration": "36\u0027", "duration_minutes": 36, "duration_width": 72, "grid_position": {"left_offset": 480.0, "position_within_slot": 0.0, "slot_index": 4, "width": 72.0}, "location": "Lakenhal", "room": "", "synopsis": "Undead Voices (2019\u20132021) explores the remnants of 1970s Italian feminist activism through a decaying Super 8 film. Blending archival fragments, personal memory, and sound collaborations, it reimagines how lost histories can speak.", "tickets": "", "title": "Undead Voices (2019\u20132021)", "venue": "Lakenhal"}}}, "15 September": {"10:30": {"Cinema 1": {"block": "Classics", "director": "Chris Marker", "duration": "110\u0027", "duration_minutes": 110, "duration_width": 220, "grid_position": {"left_offset": 60.0, "position_within_slot": 0.5, "slot_index": 0, "width": 220.0}, "location": "Kijkhuis, Cinema 1", "room": "Cinema 1", "synopsis": "Widely considered the foundational essay film, Sans Soleil is a contemplative journey through memory, time, and distant lands \u2013 Japan, Guinea-Bissau, and the Cape Verde islands \u2013 blending personal reflections with observations on modern existence.", "tickets": "", "title": "Sans Soleil", "venue": "Kijkhuis"}}, "10:45": {"Cinema 2": {"block": "", "director": "Bertrand Bonello", "duration": "80\u0027", "duration_minutes": 80, "duration_width": 160, "grid_position": {"left_offset": 90.0, "position_within_slot": 0.75, "slot_index": 0, "width": 160.0}, "location": "Kijkhuis, Cinema 2", "room": "Cinema 2", "synopsis": "Blending animation and live action to tell the story of a teenage girl trapped in her home. Created during the COVID-19 pandemic, a surreal, nightmarish world unfolds. Perhaps only an essay film could capture to confusion of these years?", "tickets": "", "title": "Coma", "venue": "Kijkhuis"}}, "12:45": {"Cinema 2": {"block": "Hong Kong Shorts", "director": "Elysa Wendi and Shing Lee", "duration": "29\u0027", "duration_minutes": 29, "duration_width": 60, "grid_position": {"left_offset": 330.0, "position_within_slot": 0.75, "slot_index": 2, "width": 58.0}, "location": "Kijkhuis, Cinema 2", "room": "Cinema 2", "synopsis": "ERROR: ROOM 404 A POTENTIAL THREAT \u2013 the courage and doubt of artists continuing to create in uncertain times, resisting the rising media control in Hong Kong.", "tickets": "", "title": "Room 404", "venue": "Kijkhuis"}}, "13:00": {"Cinema 1": {"block": "", "director": "Vincent Meessen", "duration": "108\u0027", "duration_minutes": 108, "duration_width": 216, "grid_position": {"left_offset": 360.0, "position_within_slot": 0.0, "slot_index": 3, "width": 216.0}, "location": "Kijkhuis, Cinema 1", "room": "Cinema 1", "synopsis": "Juste un mouvement by Vincent Meessen revisits Jean-Luc Godard\u2019s La Chinoise through the story of Omar Blondin Diop, blending essay, biography, and political cinema into a layered recontextualization.", "tickets": "", "title": "Juste un mouvement", "venue": "Kijkhuis"}}, "15:15": {"Cinema 1": {"block": "Workers Leaving the Factory", "director": "Harun Farocki", "duration": "36\u0027", "duration_minutes": 36, "duration_width": 72, "grid_position": {"left_offset": 630.0, "position_within_slot": 0.25, "slot_index": 5, "width": 72.0}, "location": "Kijkhuis, Cinema 1", "room": "Cinema 1", "synopsis": "A spiritual sequel to the Lumi\u00e8re brothers\u2019 iconic 1895 film, Harun Farocki\u2019s Arbeiter verlassen die Fabrik traces how the image of workers exiting factories has persisted\u2014and evolved\u2014through cinema\u2019s history.", "tickets": "", "title": "Arbeiter verlassen die Fabrik", "venue": "Kijkhuis"}}, "15:30": {"Cinema 2": {"block": "", "director": "Sergei Loznitsa", "duration": "110\u0027", "duration_minutes": 110, "duration_width": 220, "grid_position": {"left_offset": 660.0, "position_within_slot": 0.5, "slot_index": 5, "width": 220.0}, "location": "Kijkhuis, Cinema 2", "room": "Cinema 2", "synopsis": "Looking at archival footage of the British targeting of German civilians during WWII, moral ambiguities and the silence surrounding these actions are explored.", "tickets": "", "title": "The Natural History of Destruction", "venue": "Kijkhuis"}}, "17:15": {"Cinema 1": {"block": "In Focus: The Films of Harun Farocki", "director": "Franzis Kabisch", "duration": "22\u0027", "duration_minutes": 22, "duration_width": 60, "grid_position": {"left_offset": 870.0, "position_within_slot": 0.25, "slot_index": 7, "width": 44.0}, "location": "Kijkhuis, Cinema 1", "room": "Cinema 1", "synopsis": "How do the media portray the images we associate with abortion? And how do these affect women who want to have one? An impressive blend between desktop and personal aesthetics.", "tickets": "", "title": "Getty Abortions", "venue": "Kijkhuis"}}, "18:15": {"Cinema 2": {"block": "", "director": "Lea Hartlaub", "duration": "110\u0027", "duration_minutes": 110, "duration_width": 220, "grid_position": {"left_offset": 990.0, "position_within_slot": 0.25, "slot_index": 8, "width": 220.0}, "location": "Kijkhuis, Cinema 2", "room": "Cinema 2", "synopsis": "Traversing global landscapes and human activities through a recurring giraffe motif, themes of power, culture and perception are explored.", "tickets": "", "title": "sr", "venue": "Kijkhuis"}}, "19:45": {"Cinema 1": {"block": "", "director": "Aura Satz", "duration": "90\u0027", "duration_minutes": 90, "duration_width": 180, "grid_position": {"left_offset": 1170.0, "position_within_slot": 0.75, "slot_index": 9, "width": 180.0}, "location": "Kijkhuis, Cinema 1", "room": "Cinema 1", "synopsis": "What\u0027s a siren? What has it been? What can it be? An exploration of the siren in a myriad of forms.", "tickets": "", "title": "Preemptive Listening", "venue": "Kijkhuis"}}, "20:45": {"Cinema 2": {"block": "In Focus: The Films of Nguy\u1ec5n Trinh Thi", "director": "Nguy\u1ec5n Trinh Thi", "duration": "47\u0027", "duration_minutes": 47, "duration_width": 94, "grid_position": {"left_offset": 1290.0, "position_within_slot": 0.75, "slot_index": 10, "width": 94.0}, "location": "Kijkhuis, Cinema 2", "room": "Cinema 2", "synopsis": "Do you trust sound or image more? Listen closely to the sounds and images of the Indigenous peoples in the Central Highlands of Vietnam.\u00a0", "tickets": "", "title": "How to Improve the World", "venue": "Kijkhuis"}}, "22:15": {"Cinema 1": {"block": "", "director": "Graeme Arnfield", "duration": "90\u0027", "duration_minutes": 90, "duration_width": 180, "grid_position": {"left_offset": 1470.0, "position_within_slot": 0.25, "slot_index": 12, "width": 90.0}, "location": "Kijkhuis, Cinema 1", "room": "Cinema 1", "synopsis": "What happens when our homes and our dreams have been invaded? An exploration of the history of the doorbell and the implications of surveillance footage.", "tickets": "", "title": "Home Invasion", "venue": "Kijkhuis"}}}, "16 September": {"10:15": {"Cinema 2": {"block": "New Perspectives", "director": "Susanna Tomassini", "duration": "14\u0027", "duration_minutes": 14, "duration_width": 60, "grid_position": {"left_offset": 30.0, "position_within_slot": 0.25, "slot_index": 0, "width": 40}, "location": "Kijkhuis, Cinema 2", "room": "Cinema 2", "synopsis": "The Southern Thruway weaves a personal story about housing precarity with the political idea of belonging, exploring themes of uncertainty, forced collectivity, transcience, and unconventional love.", "tickets": "", "title": "The Southern Thruway", "venue": "Kijkhuis"}}, "10:30": {"Cinema 1": {"block": "", "director": "Mattijs van de Port", "duration": "70\u0027", "duration_minutes": 70, "duration_width": 140, "grid_position": {"left_offset": 60.0, "position_within_slot": 0.5, "slot_index": 0, "width": 140.0}, "location": "Kijkhuis, Cinema 1", "room": "Cinema 1", "synopsis": "Wanderers of all paths of life gather through the lens of the anthropological filmmaker, in search of a world larger than the one they know.", "tickets": "", "title": "Where can I get Lost?", "venue": "Kijkhuis"}}, "12:45": {"Cinema 1": {"block": "In Focus: The Films of Kamal Aljafari", "director": "Kamal Aljafari", "duration": "78\u0027", "duration_minutes": 78, "duration_width": 156, "grid_position": {"left_offset": 330.0, "position_within_slot": 0.75, "slot_index": 2, "width": 156.0}, "location": "Kijkhuis, Cinema 1", "room": "Cinema 1", "synopsis": "Red silhouettes draw an alternative future in looted Palestinian archival footage. A compelling film re-interpreting a past and possible future.", "tickets": "", "title": "A Fidai Film", "venue": "Kijkhuis"}}, "13:00": {"Cinema 2": {"block": "", "director": "Manthia Diawara", "duration": "50\u0027", "duration_minutes": 50, "duration_width": 100, "grid_position": {"left_offset": 360.0, "position_within_slot": 0.0, "slot_index": 3, "width": 100.0}, "location": "Kijkhuis, Cinema 2", "room": "Cinema 2", "synopsis": "A reflective portrait of life in a Senegalese coastal town, where shifting landscapes prompt conversations about the environment, labour, and our shared place in it.", "tickets": "", "title": "A Letter from Yene", "venue": "Kijkhuis"}}, "15:00": {"Cinema 2": {"block": "Classics", "director": "Chantal Akerman", "duration": "100\u0027", "duration_minutes": 100, "duration_width": 200, "grid_position": {"left_offset": 600.0, "position_within_slot": 0.0, "slot_index": 5, "width": 200.0}, "location": "Kijkhuis, Cinema 2", "room": "Cinema 2", "synopsis": "An emotional exploration on border politics, relevant now more than ever. Personal, plural and captivating in its ability to make us listen and watch carefully.\u00a0", "tickets": "", "title": "De l\u2019autre cot\u00e9", "venue": "Kijkhuis"}}, "15:15": {"Cinema 1": {"block": "", "director": "Alexander Horwath", "duration": "180\u0027", "duration_minutes": 180, "duration_width": 300, "grid_position": {"left_offset": 630.0, "position_within_slot": 0.25, "slot_index": 5, "width": 360.0}, "location": "Kijkhuis, Cinema 1", "room": "Cinema 1", "synopsis": "A meditation on Henry Fonda\u2019s screen legacy and the stories America tells about itself \u2014 idealism, doubt, and the distance between image and reality. ", "tickets": "", "title": "Henry Fonda for President", "venue": "Kijkhuis"}}, "17:30": {"Cinema 2": {"block": "Listening with the Other", "director": "Judith Westerveld", "duration": "15\u0027", "duration_minutes": 15, "duration_width": 60, "grid_position": {"left_offset": 900.0, "position_within_slot": 0.5, "slot_index": 7, "width": 40}, "location": "Kijkhuis, Cinema 2", "room": "Cinema 2", "synopsis": "An audiovisual meditation of a language and culture from a colonial past, \u201cmoving through time, reflecting on the truth of the people forgotten\u201d.", "tickets": "", "title": "The Sending of the Crows", "venue": "Kijkhuis"}}, "19:00": {"Cinema 1": {"block": "Classics", "director": "Johan van der Keuken", "duration": "120\u0027", "duration_minutes": 120, "duration_width": 240, "grid_position": {"left_offset": 1080.0, "position_within_slot": 0.0, "slot_index": 9, "width": 240.0}, "location": "Kijkhuis, Cinema 1", "room": "Cinema 1", "synopsis": "Johan van der Keuken\u2019s formally distinct essay film navigates the politics of vision across Europe, but also experiments with cinematic portraiture in wild ways. Through a mosaic of vignettes\u2014of faces, places, and voices\u2014this classic essay film explores the desire and fear of being seen, the struggle for self-perception, and the tensions within shifting cultural landscapes. A prescient film in many ways.", "tickets": "", "title": "Face Value", "venue": "Kijkhuis"}}, "19:45": {"Cinema 2": {"block": "", "director": "Miko Revereza", "duration": "96\u0027", "duration_minutes": 96, "duration_width": 192, "grid_position": {"left_offset": 1170.0, "position_within_slot": 0.75, "slot_index": 9, "width": 192.0}, "location": "Kijkhuis, Cinema 2", "room": "Cinema 2", "synopsis": "Nowhere Near by Miko Revereza is a poignant essay film that explores  displacement and the immigrant experience. Through personal meditations and striking visuals, Revereza reflects on the complexities of belonging and the struggle to bridge cultural gaps.", "tickets": "", "title": "Nowhere Near", "venue": "Kijkhuis"}}, "22:00": {"Cinema 2": {"block": "", "director": "Lis Rhodes", "duration": "80\u0027", "duration_minutes": 80, "duration_width": 160, "grid_position": {"left_offset": 1440.0, "position_within_slot": 0.0, "slot_index": 12, "width": 120.0}, "location": "Kijkhuis, Cinema 2", "room": "Cinema 2", "synopsis": "Revered essay filmmaker Lis Rhodes\u0027 latest work opens with a haunting reference to the atomic bomb in Hiroshima, setting the tone for an essay film that explores the intersections of sound, power, and history. Through fragmented imagery and often jarring audio, Rhodes incites us to reflect on the lingering impacts of violence and the structures of control in modern life.", "tickets": "", "title": "Disquiet", "venue": "Kijkhuis"}}, "22:15": {"Cinema 1": {"block": "", "director": "Sasha Litvintseva and Beny Wagner", "duration": "55\u0027", "duration_minutes": 55, "duration_width": 110, "grid_position": {"left_offset": 1470.0, "position_within_slot": 0.25, "slot_index": 12, "width": 90.0}, "location": "Kijkhuis, Cinema 1", "room": "Cinema 1", "synopsis": "A poetic and philosophical reflection on (un)ethical digestion, revealing the interdependence of the human body on its surroundings, for \u201call that you change changes you\u201d.", "tickets": "", "title": "My Want of You Partakes of Me", "venue": "Kijkhuis"}}}};
    const specialsMap = [{"block_finish_time": "16:15", "block_name": "Classics", "block_start_time": "10:30", "film_count": 3, "film_titles": ["Sans Soleil", "Face Value", "De l\u2019autre cot\u00e9"], "slug": "classics"}, {"block_finish_time": "14:41", "block_name": "Hong Kong Shorts", "block_start_time": "12:45", "film_count": 3, "film_titles": ["Free to Choose", "An Asian Ghost Story", "Room 404"], "slug": "hong-kong-shorts"}, {"block_finish_time": "19:15", "block_name": "In Focus: The Films of Harun Farocki", "block_start_time": "17:15", "film_count": 3, "film_titles": ["Was ist Los?", "Gegen-Musik", "Getty Abortions"], "slug": "in-focus-the-films-of-harun-farocki"}, {"block_finish_time": "14:33", "block_name": "In Focus: The Films of Kamal Aljafari", "block_start_time": "12:45", "film_count": 3, "film_titles": ["Man Number 4", "Capricorn Sunset", "A Fidai Film"], "slug": "in-focus-the-films-of-kamal-aljafari"}, {"block_finish_time": "22:17", "block_name": "In Focus: The Films of Nguy\u1ec5n Trinh Thi", "block_start_time": "20:45", "film_count": 2, "film_titles": ["Letters from Panduranga", "How to Improve the World"], "slug": "in-focus-the-films-of-nguyen-trinh-thi"}, {"block_finish_time": "18:42", "block_name": "Listening with the Other", "block_start_time": "17:30", "film_count": 5, "film_titles": ["The Cave Mouth and The Giant Voice", "Kapotte Muziek \u2013 Track 1", "Where no bell rings", "Message from Mukalap", "The Sending of the Crows"], "slug": "listening-with-the-other"}, {"block_finish_time": "12:04", "block_name": "New Perspectives", "block_start_time": "10:15", "film_count": 6, "film_titles": ["Perpetual Radiance", "To the Earthern Red", "Mariam Jafri vs Maryam Jafri", "Haunted, the Hollow", "Searching for the Perfect Gentleman", "The Southern Thruway"], "slug": "new-perspectives"}, {"block_finish_time": "16:46", "block_name": "Opening Event", "block_start_time": "14:00", "film_count": 2, "film_titles": ["Special Lecture by Laura Rascaroli", "Undead Voices (2019\u20132021)"], "slug": "opening-event"}, {"block_finish_time": "16:48", "block_name": "Workers Leaving the Factory", "block_start_time": "15:15", "film_count": 4, "film_titles": ["Twenty-Four Cinematic Points of View of a Factory Gate in China", "Workers Leaving the Googleplex", "La sortie de l\u0027usine Lumi\u00e8re \u00e0 Lyon", "Arbeiter verlassen die Fabrik"], "slug": "workers-leaving-the-factory"}];
    const urlMapping = {"A Fidai Film": "programme/films/a-fidai-film/", "A Letter from Yene": "programme/films/a-letter-from-yene/", "An Asian Ghost Story": "programme/films/an-asian-ghost-story/", "Arbeiter verlassen die Fabrik": "programme/films/arbeiter-verlassen-die-fabrik/", "Capricorn Sunset": "programme/films/capricorn-sunset/", "Classics": "programme/specials/classics/", "Coma": "programme/films/coma/", "De l\u2019autre cot\u00e9": "programme/films/de-lautre-cote/", "Disquiet": "programme/films/disquiet/", "Face Value": "programme/films/face-value/", "Free to Choose": "programme/films/free-to-choose/", "Gegen-Musik": "programme/films/gegen-musik/", "Getty Abortions": "programme/films/getty-abortions/", "Haunted, the Hollow": "programme/films/haunted-the-hollow/", "Henry Fonda for President": "programme/films/henry-fonda-for-president/", "Home Invasion": "programme/films/home-invasion/", "Hong Kong Shorts": "programme/specials/hong-kong-shorts/", "How to Improve the World": "programme/films/how-to-improve-the-world/", "In Focus: The Films of Harun Farocki": "programme/specials/in-focus-the-films-of-harun-farocki/", "In Focus: The Films of Kamal Aljafari": "programme/specials/in-focus-the-films-of-kamal-aljafari/", "In Focus: The Films of Nguy\u1ec5n Trinh Thi": "programme/specials/in-focus-the-films-of-nguyen-trinh-thi/", "In Praise of Slowness": "programme/films/in-praise-of-slowness/", "Juste un mouvement": "programme/films/juste-un-mouvement/", "Kapotte Muziek \u2013 Track 1": "programme/films/kapotte-muziek-track-1/", "La sortie de l\u0027usine Lumi\u00e8re \u00e0 Lyon": "programme/films/la-sortie-de-l-usine-lumiere-a-lyon/", "Letters from Panduranga": "programme/films/letters-from-panduranga/", "Listening with the Other": "programme/specials/listening-with-the-other/", "Man Number 4": "programme/films/man-number-4/", "Mariam Jafri vs Maryam Jafri": "programme/films/mariam-jafri-vs-maryam-jafri/", "Message from Mukalap": "programme/films/message-from-mukalap/", "My Want of You Partakes of Me": "programme/films/my-want-of-you-partakes-of-me/", "New Perspectives": "programme/specials/new-perspectives/", "Nowhere Near": "programme/films/nowhere-near/", "Opening Event": "programme/specials/opening-event/", "Perpetual Radiance": "programme/films/perpetual-radiance/", "Preemptive Listening": "programme/films/preemptive-listening/", "Room 404": "programme/films/room-404/", "Sans Soleil": "programme/films/sans-soleil/", "Searching for the Perfect Gentleman": "programme/films/searching-for-the-perfect-gentleman/", "Special Lecture by Laura Rascaroli": "programme/films/special-lecture-by-laura-rascaroli/", "The Cave Mouth and The Giant Voice": "programme/films/the-cave-mouth-and-the-giant-voice/", "The Natural History of Destruction": "programme/films/the-natural-history-of-destruction/", "The Sending of the Crows": "programme/films/the-sending-of-the-crows/", "The Southern Thruway": "programme/films/the-southern-thruway/", "To the Earthern Red": "programme/films/to-the-earthern-red/", "Twenty-Four Cinematic Points of View of a Factory Gate in China": "programme/films/twenty-four-cinematic-points-of-view-of-a-factory-gate-in-china/", "Undead Voices (2019\u20132021)": "programme/films/undead-voices-20192021/", "Was ist Los?": "programme/films/was-ist-los/", "Where can I get Lost?": "programme/films/where-can-i-get-lost/", "Where no bell rings": "programme/films/where-no-bell-rings/", "Workers Leaving the Factory": "programme/specials/workers-leaving-the-factory/", "Workers Leaving the Googleplex": "programme/films/workers-leaving-the-googleplex/", "sr": "programme/films/sr/"};
    
    // timeline configuration
    const config = {
        margin: { top: 32, right: 16, bottom: 32, left: 120 }, // increased left margin for venue labels
        rowHeight: 320,
        timeStart: 10, // 10:00
        timeEnd: 24,   // 24:00 (midnight)
        colors: {
            'Opening Event': '#979797',
            'Classics': '#979797',
            'New Perspectives': '#979797',
            'Hong Kong Shorts': '#979797',
            'Workers Leaving the Factory': '#979797',
            'Harun Farocki in Focus': '#979797',
            'Nguyễn Trinh Thi in Focus': '#979797',
            'Kamal Aljafari in Focus': '#979797',
            'Listening with the Other': '#979797',
            'default': '#979797'
        }
    };
    
    let currentDay = null;
    
    // initialize the schedule timeline
    function initSchedule() {
        const days = Object.keys(scheduleData).sort();
        if (days.length === 0) return;
        
        createDayTabs(days);
        
        // set default day to "15 September" (second day), fallback to first day if not found
        const defaultDay = "15 September";
        currentDay = days.includes(defaultDay) ? defaultDay : days[0];
        renderTimeline(currentDay);
    }
    
    // create day selection tabs
    function createDayTabs(days) {
        const tabsContainer = d3.select('#day-tabs');
        
        const tabs = tabsContainer.selectAll('.day-tab')
            .data(days)
            .enter()
            .append('button')
            .attr('class', 'day-tab')
            .text(d => formatDate(d)) // use actual date formatting
            .on('click', function(event, d) {
                // update active tab
                tabsContainer.selectAll('.day-tab').classed('active', false);
                d3.select(this).classed('active', true);
                
                // render timeline for selected day
                currentDay = d;
                renderTimeline(d);
            });
        
        // set the default day (15 September) as active, fallback to first tab
        const defaultDay = "15 September";
        const defaultIndex = days.indexOf(defaultDay);
        const activeIndex = defaultIndex >= 0 ? defaultIndex : 0;
        tabs.filter((d, i) => i === activeIndex).classed('active', true);
    }
    
    // format date for display
    function formatDate(dateStr) {
        // handle dates like "14 September", "15 September", etc.
        try {
            // add year for proper parsing
            const dateWithYear = `${dateStr} 2025`;
            const date = new Date(dateWithYear);
            
            if (isNaN(date)) {
                return dateStr; // fallback to original string if parsing fails
            }
            
            // format as "sat 14 sep"
            const options = { weekday: 'short', day: 'numeric', month: 'short' };
            return date.toLocaleDateString('en-US', options);
        } catch (error) {
            return dateStr; // fallback to original string on any error
        }
    }
    
    // render timeline for a specific day
    function renderTimeline(day) {
        if (!scheduleData[day]) return;
        
        const dayData = scheduleData[day];
        const events = [];
        const venues = new Set();
        const processedBlocks = new Set(); // track blocks we've already processed
        
        // extract events and venues, handling blocks vs individual films
        Object.keys(dayData).forEach(timeSlot => {
            Object.keys(dayData[timeSlot]).forEach(venue => {
                venues.add(venue);
                const event = dayData[timeSlot][venue];
                const blockName = event.block;

                // special handling for blocks: group them and use block-level timings.
                if (blockName && blockName.toLowerCase() !== 'classics') {
                    if (!processedBlocks.has(blockName)) {
                        const blockInfo = specialsMap.find(b => b.block_name === blockName);
                        if (blockInfo) {
                            // create a single event for the entire block
                            events.push({
                                ...event,
                                time: blockInfo.block_start_time,
                                venue: venue,
                                timeMinutes: timeToMinutes(blockInfo.block_start_time),
                                isBlock: true,
                                blockInfo: blockInfo,
                                title: blockName,
                                director: `${blockInfo.film_count} films`,
                                synopsis: `block featuring: ${blockInfo.film_titles.join(', ')}`
                            });
                            processedBlocks.add(blockName);
                        } else {
                            // if block info isn't in specialsmap, treat as an individual film.
                            events.push({ ...event, time: timeSlot, venue: venue, timeMinutes: timeToMinutes(timeSlot), isBlock: false });
                        }
                    }
                    // if block has been processed, we do nothing, as we don't want to render individual films from it.
                } else {
                    // no block name, or a 'classics' block which we treat as individual films.
                    events.push({ ...event, time: timeSlot, venue: venue, timeMinutes: timeToMinutes(timeSlot), isBlock: false });
                }
            });
        });
        
        const venueList = Array.from(venues).sort();
        const svgContainer = d3.select('#timeline-svg');
        
        // calculate dimensions - make timeline wider for better time representation
        // use approximately 4-5 pixels per minute for good readability
        const totalMinutes = (config.timeEnd - config.timeStart) * 60;
        const timelineWidth = Math.max(2400, totalMinutes * 4.5); // minimum 2400px, scale with time range
        const width = timelineWidth + config.margin.left + config.margin.right;
        const height = config.margin.top + config.margin.bottom + (venueList.length * config.rowHeight);
        
        // clear previous content
        svgContainer.selectAll('*').remove();
        
        // set svg dimensions
        svgContainer
            .attr('width', width)
            .attr('height', height);
        
        // create scales
        const timeScale = d3.scaleLinear()
            .domain([config.timeStart * 60, config.timeEnd * 60]) // minutes
            .range([config.margin.left, width - config.margin.right]);
        
        const venueScale = d3.scaleBand()
            .domain(venueList)
            .range([config.margin.top, height - config.margin.bottom])
            .paddingInner(0.15);
        
        // create time axis - show only hour labels but keep quarter-hour tick marks
        const timeAxis = d3.axisTop(timeScale)
            .tickFormat(d => {
                const hours = Math.floor(d / 60);
                const minutes = d % 60;
                // only show label for exact hours (when minutes = 0)
                if (minutes === 0) {
                    return `${hours.toString().padStart(2, '0')}:00`;
                }
                return ''; // empty string for quarter-hour marks
            })
            .tickValues(d3.range(config.timeStart * 60, (config.timeEnd + 1) * 60, 15)) // every 15 minutes for tick marks
            .tickSize(8); // smaller tick marks
        
        svgContainer.append('g')
            .attr('class', 'time-axis')
            .attr('transform', `translate(0, ${config.margin.top})`)
            .call(timeAxis)
            .selectAll('text')
            .style('text-anchor', 'middle')
            .style('font-size', '11px');
        
        // add vertical grid lines for better time reference
        const gridLines = svgContainer.append('g')
            .attr('class', 'grid-lines');
        
        // major grid lines (every hour)
        gridLines.selectAll('.grid-line-major')
            .data(d3.range(config.timeStart * 60, (config.timeEnd + 1) * 60, 60))
            .enter()
            .append('line')
            .attr('class', 'grid-line-major')
            .attr('x1', d => timeScale(d))
            .attr('x2', d => timeScale(d))
            .attr('y1', config.margin.top)
            .attr('y2', height - config.margin.bottom)
            .style('stroke', 'var(--text-main)')
            .style('stroke-width', '1px')
            .style('stroke-opacity', '0.3');
        
        // minor grid lines (every 30 minutes)
        gridLines.selectAll('.grid-line-minor')
            .data(d3.range(config.timeStart * 60 + 30, config.timeEnd * 60, 60))
            .enter()
            .append('line')
            .attr('class', 'grid-line-minor')
            .attr('x1', d => timeScale(d))
            .attr('x2', d => timeScale(d))
            .attr('y1', config.margin.top)
            .attr('y2', height - config.margin.bottom)
            .style('stroke', 'var(--text-main)')
            .style('stroke-width', '1px')
            .style('stroke-opacity', '0.15');
        
        // add "now" line if viewing current day
        const now = new Date();
        const currentDate = `${now.getDate()} ${now.toLocaleDateString('en-US', { month: 'long' })}`;
        
        if (day === currentDate) {
            const currentHour = now.getHours();
            const currentMinute = now.getMinutes();
            const currentTimeMinutes = currentHour * 60 + currentMinute;
            
            // only show if within timeline bounds
            if (currentTimeMinutes >= config.timeStart * 60 && currentTimeMinutes <= config.timeEnd * 60) {
                svgContainer.append('line')
                    .attr('class', 'now-line')
                    .attr('x1', timeScale(currentTimeMinutes))
                    .attr('x2', timeScale(currentTimeMinutes))
                    .attr('y1', config.margin.top)
                    .attr('y2', height - config.margin.bottom)
                    .style('stroke', 'var(--accent)')
                    .style('stroke-width', '2px')
                    .style('stroke-opacity', '0.8');
                
                // add "now" label
                svgContainer.append('text')
                    .attr('class', 'now-label')
                    .attr('x', timeScale(currentTimeMinutes) + 5)
                    .attr('y', config.margin.top - 5)
                    .style('fill', 'var(--accent)')
                    .style('font-size', '10px')
                    .style('font-family', 'necto, monospace')
                    .style('text-transform', 'uppercase')
                    .text('now');
            }
        }
        
        // add venue labels and rows
        venueList.forEach(venue => {
            const y = venueScale(venue);
            
            // venue label
            svgContainer.append('text')
                .attr('class', 'venue-label')
                .attr('x', config.margin.left - 8) // position near the edge of the margin area
                .attr('y', y + venueScale.bandwidth() / 2)
                .attr('text-anchor', 'end')
                .attr('dominant-baseline', 'middle')
                .text(venue);
            
            // venue row line
            svgContainer.append('line')
                .attr('class', 'venue-row')
                .attr('x1', config.margin.left)
                .attr('x2', width - config.margin.right)
                .attr('y1', y + venueScale.bandwidth())
                .attr('y2', y + venueScale.bandwidth());
        });
        
        // add events
        const eventGroups = svgContainer.selectAll('.event')
            .data(events)
            .enter()
            .append('g')
            .attr('class', 'event');
        
        // event rectangles with duration-based styling
        eventGroups.append('rect')
            .attr('class', d => {
                let classes = d.isBlock ? 'event-block block-event' : 'event-block';
                
                // add duration-based classes for visual variety
                const duration = d.isBlock && d.blockInfo ? 
                    calculateTimeDifference(d.blockInfo.block_start_time, d.blockInfo.block_finish_time) :
                    (d.duration_minutes || 90);
                
                if (duration <= 30) {
                    classes += ' short-duration';
                } else if (duration >= 120) {
                    classes += ' long-duration';
                }
                
                return classes;
            })
            .attr('x', d => {
                // ensure precise time positioning
                const startTime = d.isBlock && d.blockInfo ? 
                    timeToMinutes(d.blockInfo.block_start_time) : d.timeMinutes;
                return timeScale(Math.max(startTime, config.timeStart * 60));
            })
            .attr('y', d => venueScale(d.venue) + 2)
            .attr('width', d => {
                let startMins, endMins;
                if (d.isBlock && d.blockInfo) {
                    startMins = timeToMinutes(d.blockInfo.block_start_time);
                    endMins = timeToMinutes(d.blockInfo.block_finish_time);
                } else {
                    startMins = d.timeMinutes;
                    // use actual duration for precise width calculation
                    endMins = d.timeMinutes + (d.duration_minutes || 90); // default 90min if no duration
                }
                
                // clamp to timeline bounds but maintain proportional representation
                const clampedStart = Math.max(startMins, config.timeStart * 60);
                const clampedEnd = Math.min(endMins, config.timeEnd * 60);
                
                // calculate actual width based on time difference
                const actualDuration = clampedEnd - clampedStart;
                const pixelWidth = timeScale(clampedStart + actualDuration) - timeScale(clampedStart);
                
                // minimum width for visibility (15px) but respect actual duration
                return Math.max(15, pixelWidth);
            })
            .attr('height', venueScale.bandwidth() - 4)
            .attr('fill', d => d.isBlock ? getBlockColor(d.blockInfo?.block_name) : getEventColor(d.block));
        
        // event titles - position based on actual start time
        eventGroups.append('text')
            .attr('class', 'event-text')
            .attr('x', d => {
                const startTime = d.isBlock && d.blockInfo ? 
                    timeToMinutes(d.blockInfo.block_start_time) : d.timeMinutes;
                return timeScale(Math.max(startTime, config.timeStart * 60)) + 16;
            })
            .attr('y', d => venueScale(d.venue) + 36)
            .text(d => {
                if (d.isBlock) {
                    return truncateText(d.blockInfo?.block_name || d.title, 25);
                } else {
                    return truncateText(d.title, 25);
                }
            });
        
        // event directors - position based on actual start time
        eventGroups.append('text')
            .attr('class', 'event-director')
            .attr('x', d => {
                const startTime = d.isBlock && d.blockInfo ? 
                    timeToMinutes(d.blockInfo.block_start_time) : d.timeMinutes;
                // add extra space for arrow if it's a block
                const baseX = timeScale(Math.max(startTime, config.timeStart * 60)) + 16;
                return d.isBlock ? baseX + 20 : baseX; 
            })
            .attr('y', d => venueScale(d.venue) + 60)
            .text(d => {
                if (d.isBlock) {
                    // for blocks, we'll create individual film links instead of this text
                    return '';
                } else {
                    return d.director ? truncateText(d.director, 30) : '';
                }
            });
        
        // create individual film links for block events (arranged in column)
        eventGroups
            .filter(d => d.isBlock)
            .each(function(d) {
                const group = d3.select(this);
                const filmNames = d.blockInfo?.film_titles || [];
                const startTime = d.isBlock && d.blockInfo ? 
                    timeToMinutes(d.blockInfo.block_start_time) : d.timeMinutes;
                const baseX = timeScale(Math.max(startTime, config.timeStart * 60)) + 20; 
                const baseY = venueScale(d.venue) + 72;
                
                filmNames.forEach((filmTitle, index) => {
                    // truncate long film titles
                    const maxLength = 25; 
                    const truncatedTitle = filmTitle.length > maxLength ? 
                        filmTitle.substring(0, maxLength) + '...' : filmTitle;
                    
                    // create background rect (initially hidden)
                    const linkBg = group.append('rect')
                        .attr('class', 'event-film-link-bg')
                        .attr('x', baseX - 4)
                        .attr('y', baseY + (index * 32) - 16) // increased spacing to 32px
                        .attr('width', truncatedTitle.length * 10 + 16) // width based on truncated text
                        .attr('height', 20)
                        .style('fill', 'var(--text-main)')
                        .style('opacity', 0) // initially hidden
                        .style('cursor', 'pointer');
                    
                    const filmLink = group.append('text')
                        .attr('class', 'event-film-link')
                        .attr('x', baseX)
                        .attr('y', baseY + (index * 32)) 
                        .style('fill', 'var(--accent)')
                        .style('font-size', '1.25rem')
                        .style('font-family', 'switzer, Arial, sans-serif')
                        .style('cursor', 'pointer')
                        .text(truncatedTitle);
                    
                    // add click handlers to both background and text
                    [linkBg, filmLink].forEach(element => {
                        element
                            .on('click', function(event) {
                                event.stopPropagation(); // prevent block click
                                const currentLang = window.location.pathname.includes('/nl/') ? 'nl' : 'en';
                                
                                // use pre-generated URL mapping for film pages
                                const relativePath = urlMapping[filmTitle];
                                if (relativePath) {
                                    const filmUrl = `/${currentLang}/${relativePath}`;
                                    window.location.href = filmUrl;
                                } else {
                                    console.warn(`no url mapping found for film: ${filmTitle}`);
                                    // fallback to error page
                                    window.location.href = `/${currentLang}/error/`;
                                }
                            })
                            .on('mouseover', function() {
                                linkBg.style('opacity', 1).style('fill', 'var(--text-main)');
                                filmLink.style('fill', 'var(--accent)');
                            })
                            .on('mouseout', function() {
                                linkBg.style('opacity', 0);
                                filmLink.style('fill', 'var(--accent)');
                            });
                    });
                });
            });
        
        // screening time at bottom of event - position based on actual start time
        eventGroups.append('text')
            .attr('class', 'event-time')
            .attr('x', d => {
                const startTime = d.isBlock && d.blockInfo ? 
                    timeToMinutes(d.blockInfo.block_start_time) : d.timeMinutes;
                return timeScale(Math.max(startTime, config.timeStart * 60)) + 16;
            })
            .attr('y', d => venueScale(d.venue) + venueScale.bandwidth() - 16)
            .text(d => {
                if (d.isBlock && d.blockInfo) {
                    const startTime = d.blockInfo.block_start_time;
                    const endTime = d.blockInfo.block_finish_time;
                    return `${startTime} — ${endTime}`;
                } else {
                    const startTime = d.time;
                    const endTime = calculateEndTime(d.time, d.duration_minutes || 90);
                    return `${startTime} — ${endTime}`;
                }
            });
        
        // add click navigation to film/special pages
        eventGroups
            .style('cursor', 'pointer')
            .on('click', function(event, d) {
                // only handle block navigation if it's not a film link click
                if (!event.target.classList.contains('event-film-link')) {
                    const url = generateEventUrl(d);
                    window.location.href = url;
                }
            })
            .on('mouseover', function(event, d) {
                // only apply hover effect to the block, not when hovering over film links
                if (!event.target.classList.contains('event-film-link')) {
                    d3.select(this).select('.event-block')
                        .style('fill', 'var(--bg-main)')
                        .style('stroke', 'var(--accent)')
                        .style('stroke-width', '2px');
                }
            })
            .on('mouseout', function(event, d) {
                // restore original colors when leaving the event group
                if (!event.target.classList.contains('event-film-link')) {
                    d3.select(this).select('.event-block')
                        .style('fill', d.isBlock ? getBlockColor(d.blockInfo?.block_name) : getEventColor(d.block))
                        .style('stroke', d.isBlock ? 'var(--text-main)' : 'none')
                        .style('stroke-width', d.isBlock ? '1px' : '0px');
                }
            });
    }
    
    // convert time string to minutes
    function timeToMinutes(timeStr) {
        const [hours, minutes] = timeStr.split(':').map(Number);
        return hours * 60 + (minutes || 0);
    }
    
    // generate URL for film or special based on current language and data
    function generateEventUrl(eventData) {
        // detect current language from URL
        const currentLang = window.location.pathname.includes('/nl/') ? 'nl' : 'en';
        
        if (eventData.isBlock && eventData.blockInfo) {
            // use pre-generated URL mapping for special pages
            const blockName = eventData.blockInfo.block_name;
            const relativePath = urlMapping[blockName];
            if (relativePath) {
                return `/${currentLang}/${relativePath}`;
            }
            // fallback: construct URL using slug from blockInfo
            const slug = eventData.blockInfo.slug;
            return `/${currentLang}/programme/specials/${slug}/`;
        } else {
            // use pre-generated URL mapping for individual film pages
            const filmTitle = eventData.title;
            const relativePath = urlMapping[filmTitle];
            if (relativePath) {
                return `/${currentLang}/${relativePath}`;
            }
            // fallback: no URL available, return empty or error page
            console.warn(`no url mapping found for film: ${filmTitle}`);
            return `/${currentLang}/error/`;
        }
    }
    
    // calculate time difference in minutes between two time strings
    function calculateTimeDifference(startTime, endTime) {
        const startMinutes = timeToMinutes(startTime);
        const endMinutes = timeToMinutes(endTime);
        
        // handle case where end time might be next day
        if (endMinutes < startMinutes) {
            return (endMinutes + 24 * 60) - startMinutes;
        }
        
        return endMinutes - startMinutes;
    }
    
    // calculate end time based on start time and duration in minutes
    function calculateEndTime(startTime, durationMinutes) {
        const startMinutes = timeToMinutes(startTime);
        const endMinutes = startMinutes + durationMinutes;
        
        const hours = Math.floor(endMinutes / 60);
        let minutes = endMinutes % 60;
        
        // round minutes to next 5 or 0 (i.e., 0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55)
        minutes = Math.ceil(minutes / 5) * 5;
        
        // handle overflow when minutes become 60
        if (minutes >= 60) {
            minutes = 0;
            hours = hours + 1;
        }
        
        return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`;
    }
    
    // get color for event block based on block name
    function getEventColor(blockName) {
        return config.colors[blockName] || config.colors.default;
    }
    
    // get color for special blocks (same as getEventColor but more explicit)
    function getBlockColor(blockName) {
        return config.colors[blockName] || config.colors.default;
    }
    
    // get color for special blocks (slightly different handling)
    function getBlockColor(blockName) {
        return config.colors[blockName] || config.colors.default;
    }
    
    // return full text (do not truncate)
    function truncateText(text, maxLength) {
        // return original text or empty string when falsy
        return text || '';
    }
    
    // handle window resize
    window.addEventListener('resize', function() {
        if (currentDay) {
            renderTimeline(currentDay);
        }
    });
    
    // initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
        initSchedule();
    });
</script>


    

    <div id="custom-cursor"></div>

    <script src="/scripts.js"></script>
    <script>
        // this is for approvals on github pages 
        window.BASE_PATH = '/';

        // heeeeeyyyyyyyy, my name is pyotr and
        // im very likely looking for new projects
        // shall we talk about your website?
        // do you want to know more about this
        // static bilingual vanilla js html css website?

        // best way to reach out to me is t.me/itspyotr
        // otherwise my website is here wshbd.com

        console.log("\n\n\n\t" +
            "oooo             .o88o.  .o88o. \n\t" +
            "`888             888 `\"  888 `\" \n\t" +
            " 888   .ooooo.  o888oo  o888oo  \n\t" +
            " 888  d88' `88b  888     888    \n\t" +
            " 888  888ooo888  888     888    \n\t" +
            " 888  888    .o  888     888    \n\t" +
            "o888o `Y8bod8P' o888o   o888o   \n\n\t" +
            "  Leiden Essay Film Festival\n\t" +
            "http://github.com/woshibide/leff\n\t\t"
        );
    </script>
</body>

</html>